!function(){"use strict";angular.module("app",["app.core","app.intro","app.game","app.enemy","app.player","app.bullet","app.score"])}();
var corePage=angular.module("app.core",["ngAnimate","ui.router","uuid","templates"]);
!function(E,n){"use strict";n.constant("CONFIG",{SCREEN_SIZE:9,QTY_ENEMIES:5,RESPAWN_ENEMY:1e3,VEL_BULLET:200,SCORE:10})}(angular,corePage);
!function(r,e){"use strict";function i(r){r.otherwise("/intro")}e.config(i),i.$inject=["$urlRouterProvider"]}(angular,corePage);
var introPage=angular.module("app.intro",[]);
!function(t,n){"use strict";function i(t){t.state("intro",{url:"/intro",templateUrl:"app/intro/intro.tpl.html"})}n.config(i),i.$inject=["$stateProvider"]}(angular,introPage);
var gamePage=angular.module("app.game",["app.keyboard"]);
!function(e,t){"use strict";function a(e){e.state("game",{url:"/game",templateUrl:"app/game/game.tpl.html",controller:"GameCtrl"})}t.config(a),a.$inject=["$stateProvider"]}(angular,gamePage);
!function(e,t){"use strict";function i(e,t,i,s,r,c,n){this.enemy=e,this.player=t,this.bullet=i,this.score=s,this.newGame=function(){var e=this;this.enemy.insertStartEnemies(),this.player.setPlayer(),this.bullet.resetBullets(),this.score.resetScore(),r.init(),r.on(function(t){n(function(){e.move(t)},0)})},this.move=function(e){switch(e){case"left":this.player.moveLeft();break;case"right":this.player.moveRight();break;case"space":this.bullet.shoot()}}}t.service("GameService",i),i.$inject=["EnemyService","PlayerService","BulletService","ScoreService","KeyboardService","$interval","$timeout"]}(angular,gamePage);
!function(e,t){"use strict";function a(e,t,a){this.game=e;var r=this;a.startGame=function(){r.game.newGame(),a.enemies=r.game.enemy.getEnemies(),a.player=r.game.player.getPlayer(),a.bullets=r.game.bullet.getBullets(),a.score=r.game.score.getScore()},a.startGame()}t.controller("GameCtrl",a),a.$inject=["GameService","KeyboardService","$scope","$interval","$timeout"]}(angular,gamePage);
var gridPage=angular.module("app.grid",[]);
!function(t,i){"use strict";function s(t){this.cells={},this.resetCells=function(){this.cells={}},this.setRandomCell=function(){this.setCellAt(this.randomAvailableCell())},this.setCellAt=function(t){var i=this._coordinatesToPosition(t);this.cells[i]={x:t.x,y:t.y}},this.getCellAt=function(t){var i=this._coordinatesToPosition(t);return this.cells[i]?this.cells[i]:null},this.deleteCellAt=function(t){var i=this._coordinatesToPosition(t);return this.cells[i]?(this.cells[i]=void 0,!0):!1},this.randomAvailableCell=function(){var t=this.availableCells();return t.length>0?t[Math.floor(Math.random()*t.length)]:void 0},this.availableCells=function(){var t=[],i=this;return this.forEach(function(s,e){var o=i.getCellAt({x:s,y:e});o||t.push({x:s,y:e})}),t},this.forEach=function(i){for(var s=t.SCREEN_SIZE*t.SCREEN_SIZE-t.SCREEN_SIZE,e=0;s>e;e++){var o=this._positionToCoordinates(e);i(o.x,o.y,this.cells[e])}},this._coordinatesToPosition=function(i){return i.y*t.SCREEN_SIZE+i.x},this._positionToCoordinates=function(i){var s=i%t.SCREEN_SIZE,e=(i-s)/t.SCREEN_SIZE;return{x:s,y:e}}}i.service("GridService",s),s.$inject=["CONFIG"]}(angular,gridPage);
var enemyPage=angular.module("app.enemy",["app.grid"]);
!function(e){"use strict";function n(e,n,t){var i=n;this.insertStartEnemies=function(){i.resetCells();for(var n=0;n<e.QTY_ENEMIES;n++)i.setRandomCell()},this.killEnemy=function(n){return i.deleteCellAt(n)?(t(function(){i.setRandomCell()},e.RESPAWN_ENEMY),!0):!1},this.getEnemies=function(){return i.cells}}e.module("app.enemy").service("EnemyService",n),n.$inject=["CONFIG","GridService","$timeout"]}(angular,enemyPage);
var playerPage=angular.module("app.player",[]);
!function(e,t){"use strict";function i(e){var t={};this.setPlayer=function(){var i=Math.floor(e.SCREEN_SIZE/2),n=e.SCREEN_SIZE;t.x=i,t.y=n},this.getPlayer=function(){return t},this.moveLeft=function(){t.x>0&&(t.x+=-1)},this.moveRight=function(){t.x<e.SCREEN_SIZE&&(t.x+=1)}}t.service("PlayerService",i),i.$inject=["CONFIG","GridService"]}(angular,playerPage);
var bulletPage=angular.module("app.bullet",["uuid"]);
!function(e,n){"use strict";function t(n,t,i,c,u,o){function r(e){v[e]=void 0}function l(e){0===v[e].y?r(e):v[e].y+=-1}function s(e,t){a.killEnemy(e)?(v[t].explode=!0,o(function(){r(t)},n.VEL_BULLET),c.inscreaseScore()):h.push(o(function(){l(t),v[t]&&s(e,t)},n.VEL_BULLET))}var f=t,a=i,v={},h=[];this.shoot=function(){var n=e.copy(f.getPlayer()),t=u.next();v[t]=n,s(n,t)},this.getBullets=function(){return v},this.resetBullets=function(){v={},e.forEach(h,function(e){o.cancel(e)}),h.length=0}}n.service("BulletService",t),t.$inject=["CONFIG","PlayerService","EnemyService","ScoreService","GenerateUniqueId","$timeout"]}(angular,bulletPage);
var keyboardPage=angular.module("app.keyboard",[]);
!function(e,n){"use strict";function t(e){var n="right",t="left",i="space",a={37:t,39:n,32:i};this.init=function(){var n=this;this.keyEventHandlers=[],e.unbind("keyup"),e.bind("keyup",function(e){var t=a[e.which];t&&(e.preventDefault(),n._handleKeyEvent(t,e))})},this.on=function(e){this.keyEventHandlers.push(e)},this._handleKeyEvent=function(e,n){var t=this.keyEventHandlers;if(t){n.preventDefault();for(var i=0;i<t.length;i++){var a=t[i];a(e,n)}}}}n.service("KeyboardService",t),t.$inject=["$document"]}(angular,keyboardPage);
var scorePage=angular.module("app.score",[]);
!function(e,c){"use strict";function n(e){var c={value:0};this.inscreaseScore=function(){c.value+=e.SCORE},this.resetScore=function(){c.value=0},this.getScore=function(){return c}}c.service("ScoreService",n),n.$inject=["CONFIG"]}(angular,scorePage);